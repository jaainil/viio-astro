import{g as y}from"./index.C8pce-KX.js";import{S as P}from"./ScrollTrigger.D1XJUMov.js";import{m as R}from"./Layout.astro_astro_type_script_index_0_lang.Cqt68PJG.js";import"./globalTicker.tZPeNIfN.js";import"./observers.Dpnmwwyi.js";y.registerPlugin(P);function v(u,p,a,e){const d=[{x:-.5,y:-.5},{x:.5,y:-.5},{x:.5,y:.5},{x:-.5,y:.5}],g={x:50,y:50};let n=u*Math.PI/180,r=Math.cos(n),o=Math.sin(n),s=p*(a<e?a/100:e/100),i=s;return d.map(m=>{let l=m.x*s,t=m.y*i,c=l*r-t*o,h=l*o+t*r;return{x:g.x+c/a*100,y:g.y+h/e*100}})}class z extends HTMLElement{connectedCallback(){const p=this.dataset.ignoreLast==="true",a=this.querySelector(".inner"),e=35,d=e*Math.PI/180,g=Math.abs(Math.cos(d))+Math.abs(Math.sin(d)),n=this.querySelectorAll(".inner > *"),r=[0,0],o=y.timeline({scrollTrigger:{trigger:a,scrub:!0,start:"top top",end:()=>`+=${window.innerHeight*1.5}`,invalidateOnRefresh:!0,onRefresh:()=>{r[0]=window.innerWidth,r[1]=window.innerHeight}}});n.forEach((s,i)=>{const m=s.querySelectorAll("[data-sy-reveal-manual]"),l={p:0};y.set(s,{zIndex:n.length-i}),o.add(()=>{o.scrollTrigger?.direction===1&&m.forEach(t=>{R(t)})},i===0?0:">-0.3"),!(p&&i===n.length-1)&&o.fromTo(l,{p:0},{p:1,onUpdate:()=>{const t=l.p,[c,h]=r,M=e+t*75,x=Math.max(c,h)*g/Math.min(c,h)*100,S=x-t*x,w=v(M,S,c,h).map(f=>`${f.x}% ${f.y}%`).join(", ");s.style.clipPath=`polygon(${w})`}})})}}customElements.define("sy-rect-reveal",z);
